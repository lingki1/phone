# 数据备份管理功能

## 功能概述

数据备份管理功能允许用户导出和导入所有应用数据，包括：

### 导出的数据包括：
- **聊天记录和角色人设**：所有单聊和群聊的完整对话历史
- **群聊数据**：群成员、群设置、群公告等
- **API配置**：代理地址、API密钥、模型选择
- **个人信息**：用户头像、昵称、个人介绍
- **余额和交易记录**：虚拟货币余额和所有交易历史
- **世界书**：所有创建的世界观设定
- **预设配置**：AI模型参数配置
- **主题设置**：用户选择的主题配色
- **聊天状态**：角色在线状态、心情、位置等
- **聊天背景**：自定义的聊天背景设置

## 使用方法

### 导出数据
1. 在个人页面点击"数据备份管理"
2. 点击"导出所有数据"按钮
3. 系统会自动下载一个JSON格式的备份文件
4. 文件名格式：`chat-app-backup-YYYY-MM-DD.json`

### 导入数据
1. 在个人页面点击"数据备份管理"
2. 点击"选择文件导入"按钮
3. 选择之前导出的JSON备份文件
4. 系统会自动导入所有数据并刷新页面

### 清空数据
1. 在数据备份管理页面底部找到"危险操作"区域
2. 点击"清空所有数据"按钮
3. 确认两次警告提示
4. 所有数据将被永久删除

## 安全注意事项

- 导出的文件包含敏感信息，请妥善保管
- 不要将备份文件分享给他人
- 建议在安全的环境下进行导入操作
- 导入操作会覆盖现有数据，请谨慎操作

## 技术实现

### 组件结构
```
backup/
├── DataBackupManager.tsx    # 主组件
├── DataBackupManager.css    # 样式文件
└── index.ts                 # 导出文件
```

### 数据库支持
- 使用 IndexedDB 进行数据存储
- 支持所有现有数据表的导入导出
- 包含数据版本控制和格式验证

### 进度显示
- 实时显示导入/导出进度
- 详细的操作状态提示
- 错误处理和用户反馈

## 版本历史

- **v1.4** (当前版本)
  - 支持聊天状态和背景导入导出
  - 改进的错误处理
  - 更好的用户界面

- **v1.3** (之前版本)
  - 基础的数据导入导出功能
  - 支持主要数据类型

## 兼容性

- 支持从旧版本备份文件导入
- 向后兼容的数据格式
- 自动处理缺失字段 