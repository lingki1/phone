# 多组API配置功能实现

## 功能概述

为用户提供多组API配置的保存和管理功能，允许用户保存多套不同的API URL和模型配置，并可以快速切换使用。

## 实现的功能

### 1. API配置保存
- 用户可以在ApiSettingsModal中配置好API URL、密钥和模型后，点击"保存当前配置"按钮
- 系统会弹出保存对话框，要求用户输入配置名称
- 配置会被保存到IndexedDB数据库中，支持持久化存储

### 2. 配置选择器
- 在ApiSettingsModal顶部显示已保存的配置列表
- 用户可以点击任意配置快速加载到当前设置中
- 支持设置默认配置，默认配置会优先显示
- 显示配置的详细信息：名称、URL、模型、创建时间

### 3. 配置管理
- 支持删除不需要的配置
- 支持设置默认配置
- 配置按创建时间倒序排列
- 支持配置的导入和导出（通过数据库备份）

## 技术实现

### 文件结构
```
src/app/components/qq/apisaving/
├── types.ts                    # 类型定义
├── apiConfigManager.ts         # API配置管理器
├── ApiConfigSelector.tsx       # 配置选择器组件
├── SaveConfigDialog.tsx        # 保存配置对话框
├── ApiConfigSelector.css       # 选择器样式
├── SaveConfigDialog.css        # 对话框样式
└── index.ts                    # 模块导出
```

### 数据库存储
- 新增 `SAVED_API_CONFIGS_STORE` 存储表
- 数据库版本升级到 13
- 支持配置的增删改查操作

### 核心组件

#### ApiConfigManager
- 单例模式的管理器
- 提供配置的CRUD操作
- 支持默认配置管理
- 使用IndexedDB进行持久化存储

#### ApiConfigSelector
- 显示已保存的配置列表
- 支持配置选择和切换
- 提供删除和设置默认功能
- 响应式设计，支持移动端

#### SaveConfigDialog
- 模态对话框形式
- 显示当前配置预览
- 支持配置名称输入
- 表单验证和错误处理

## 使用方法

### 保存配置
1. 在ApiSettingsModal中填写API配置信息
2. 点击"保存当前配置"按钮
3. 在弹出的对话框中输入配置名称
4. 点击"保存配置"完成保存

### 切换配置
1. 在ApiSettingsModal顶部的配置列表中选择需要的配置
2. 配置会自动加载到当前设置中
3. 可以继续修改或直接保存使用

### 管理配置
- 点击配置项右侧的"设为默认"按钮设置默认配置
- 点击"删除"按钮删除不需要的配置
- 默认配置会在列表中显示"默认"标签

## 兼容性

- 保持与现有API配置系统的完全兼容
- 不影响现有的API调用逻辑
- 支持数据库版本自动升级
- 向后兼容，不会影响现有用户数据

## 安全考虑

- API密钥使用IndexedDB加密存储
- 配置预览时密钥部分隐藏显示
- 支持配置的本地备份和恢复
- 不向外部传输敏感信息

## 性能优化

- 使用React.memo优化组件渲染
- 配置列表支持虚拟滚动（大量配置时）
- 异步加载配置数据
- 缓存已加载的配置信息

## 未来扩展

- 支持配置的云端同步
- 支持配置的导入导出
- 支持配置的分享功能
- 支持配置的使用统计
